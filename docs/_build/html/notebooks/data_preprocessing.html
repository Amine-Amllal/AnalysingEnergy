

<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Preprocessing Notebook &mdash; AnalysingEnergy 1.0.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
      <script src="../_static/jquery.js"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
      <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
      <script src="../_static/doctools.js"></script>
      <script src="../_static/sphinx_highlight.js"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            AnalysingEnergy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <!-- Local TOC -->
              <div class="local-toc"><ul>
<li><a class="reference internal" href="#">Data Preprocessing Notebook</a><ul>
<li><a class="reference internal" href="#overview">Overview</a></li>
<li><a class="reference internal" href="#notebook-structure">Notebook Structure</a><ul>
<li><a class="reference internal" href="#data-loading-and-initial-exploration">1. Data Loading and Initial Exploration</a></li>
<li><a class="reference internal" href="#exploratory-data-analysis-eda">2. Exploratory Data Analysis (EDA)</a><ul>
<li><a class="reference internal" href="#statistical-summary">2.1 Statistical Summary</a></li>
<li><a class="reference internal" href="#time-series-visualization">2.2 Time Series Visualization</a></li>
<li><a class="reference internal" href="#correlation-analysis">2.3 Correlation Analysis</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-cleaning-and-quality-checks">3. Data Cleaning and Quality Checks</a><ul>
<li><a class="reference internal" href="#missing-value-handling">3.1 Missing Value Handling</a></li>
<li><a class="reference internal" href="#outlier-detection-and-treatment">3.2 Outlier Detection and Treatment</a></li>
<li><a class="reference internal" href="#data-validation">3.3 Data Validation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#feature-engineering">4. Feature Engineering</a><ul>
<li><a class="reference internal" href="#temporal-features">4.1 Temporal Features</a></li>
<li><a class="reference internal" href="#lag-features">4.2 Lag Features</a></li>
<li><a class="reference internal" href="#rolling-statistics">4.3 Rolling Statistics</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-scaling-and-normalization">5. Data Scaling and Normalization</a><ul>
<li><a class="reference internal" href="#minmax-scaling">5.1 MinMax Scaling</a></li>
<li><a class="reference internal" href="#feature-selection">5.2 Feature Selection</a></li>
</ul>
</li>
<li><a class="reference internal" href="#train-test-split">6. Train-Test Split</a><ul>
<li><a class="reference internal" href="#temporal-split-strategy">6.1 Temporal Split Strategy</a></li>
<li><a class="reference internal" href="#validation-set-creation">6.2 Validation Set Creation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sequence-generation-for-lstm">7. Sequence Generation for LSTM</a><ul>
<li><a class="reference internal" href="#time-series-sequence-creation">7.1 Time Series Sequence Creation</a></li>
<li><a class="reference internal" href="#multi-step-prediction-preparation">7.2 Multi-step Prediction Preparation</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-export-and-persistence">8. Data Export and Persistence</a><ul>
<li><a class="reference internal" href="#processed-data-export">8.1 Processed Data Export</a></li>
<li><a class="reference internal" href="#scaler-persistence">8.2 Scaler Persistence</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#key-visualizations">Key Visualizations</a><ul>
<li><a class="reference internal" href="#time-series-plots">1. Time Series Plots</a></li>
<li><a class="reference internal" href="#distribution-analysis">2. Distribution Analysis</a></li>
<li><a class="reference internal" href="#correlation-heatmaps">3. Correlation Heatmaps</a></li>
<li><a class="reference internal" href="#seasonal-decomposition">4. Seasonal Decomposition</a></li>
</ul>
</li>
<li><a class="reference internal" href="#data-quality-metrics">Data Quality Metrics</a><ul>
<li><a class="reference internal" href="#completeness">Completeness</a></li>
<li><a class="reference internal" href="#consistency">Consistency</a></li>
<li><a class="reference internal" href="#reliability">Reliability</a></li>
</ul>
</li>
<li><a class="reference internal" href="#performance-considerations">Performance Considerations</a><ul>
<li><a class="reference internal" href="#memory-optimization">Memory Optimization</a></li>
<li><a class="reference internal" href="#processing-speed">Processing Speed</a></li>
</ul>
</li>
<li><a class="reference internal" href="#output-files">Output Files</a></li>
<li><a class="reference internal" href="#next-steps">Next Steps</a></li>
<li><a class="reference internal" href="#dependencies">Dependencies</a></li>
</ul>
</li>
</ul>
</div>
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">AnalysingEnergy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Data Preprocessing Notebook</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/notebooks/data_preprocessing.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="data-preprocessing-notebook">
<h1>Data Preprocessing Notebook<a class="headerlink" href="#data-preprocessing-notebook" title="Permalink to this heading"></a></h1>
<p>This notebook (<code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">preprocessing.ipynb</span></code>) provides comprehensive data preprocessing and exploratory data analysis for the AnalysingEnergy project.</p>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>The data preprocessing notebook handles the initial data preparation pipeline, including data cleaning, feature engineering, and splitting for machine learning model training.</p>
</section>
<section id="notebook-structure">
<h2>Notebook Structure<a class="headerlink" href="#notebook-structure" title="Permalink to this heading"></a></h2>
<section id="data-loading-and-initial-exploration">
<h3>1. Data Loading and Initial Exploration<a class="headerlink" href="#data-loading-and-initial-exploration" title="Permalink to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">seaborn</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">sns</span>

<span class="c1"># Load the main dataset</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;Data/data.csv&quot;</span><span class="p">,</span> <span class="n">index_col</span><span class="o">=</span><span class="s2">&quot;date&quot;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Key Operations:</strong></p>
<ul class="simple">
<li><p>Loading CSV data with proper datetime parsing</p></li>
<li><p>Initial data shape and structure examination</p></li>
<li><p>Missing value analysis</p></li>
<li><p>Data type verification</p></li>
</ul>
</section>
<section id="exploratory-data-analysis-eda">
<h3>2. Exploratory Data Analysis (EDA)<a class="headerlink" href="#exploratory-data-analysis-eda" title="Permalink to this heading"></a></h3>
<section id="statistical-summary">
<h4>2.1 Statistical Summary<a class="headerlink" href="#statistical-summary" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Descriptive statistics for all variables</p></li>
<li><p>Distribution analysis</p></li>
<li><p>Outlier detection using IQR method</p></li>
</ul>
</section>
<section id="time-series-visualization">
<h4>2.2 Time Series Visualization<a class="headerlink" href="#time-series-visualization" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Temporal plots for all meteorological variables</p></li>
<li><p>Energy demand and generation patterns</p></li>
<li><p>Seasonal decomposition analysis</p></li>
</ul>
</section>
<section id="correlation-analysis">
<h4>2.3 Correlation Analysis<a class="headerlink" href="#correlation-analysis" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Correlation matrix</span>
<span class="n">correlation_matrix</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">correlation_matrix</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;coolwarm&#39;</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Feature Correlation Matrix&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p><strong>Key Insights:</strong></p>
<ul class="simple">
<li><p>Temperature-energy demand relationships</p></li>
<li><p>Wind speed-generation correlations</p></li>
<li><p>Seasonal pattern identification</p></li>
</ul>
</section>
</section>
<section id="data-cleaning-and-quality-checks">
<h3>3. Data Cleaning and Quality Checks<a class="headerlink" href="#data-cleaning-and-quality-checks" title="Permalink to this heading"></a></h3>
<section id="missing-value-handling">
<h4>3.1 Missing Value Handling<a class="headerlink" href="#missing-value-handling" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Check for missing values</span>
<span class="n">missing_values</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Missing values per column:&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">missing_values</span><span class="p">)</span>

<span class="c1"># Handle missing values if any</span>
<span class="c1"># Forward fill for time series continuity</span>
<span class="n">data_cleaned</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">fillna</span><span class="p">(</span><span class="n">method</span><span class="o">=</span><span class="s1">&#39;ffill&#39;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="outlier-detection-and-treatment">
<h4>3.2 Outlier Detection and Treatment<a class="headerlink" href="#outlier-detection-and-treatment" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Statistical outlier identification</p></li>
<li><p>Physical feasibility checks</p></li>
<li><p>Outlier treatment strategies</p></li>
</ul>
</section>
<section id="data-validation">
<h4>3.3 Data Validation<a class="headerlink" href="#data-validation" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Range validation for each variable</p></li>
<li><p>Temporal consistency checks</p></li>
<li><p>Unit verification</p></li>
</ul>
</section>
</section>
<section id="feature-engineering">
<h3>4. Feature Engineering<a class="headerlink" href="#feature-engineering" title="Permalink to this heading"></a></h3>
<section id="temporal-features">
<h4>4.1 Temporal Features<a class="headerlink" href="#temporal-features" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Extract temporal features</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">year</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;month&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">month</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;day_of_year&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">dayofyear</span>
<span class="n">data</span><span class="p">[</span><span class="s1">&#39;weekday&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">index</span><span class="o">.</span><span class="n">weekday</span>
</pre></div>
</div>
</section>
<section id="lag-features">
<h4>4.2 Lag Features<a class="headerlink" href="#lag-features" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create lag features for time series modeling</span>
<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="n">data</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s1">_lag1&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s1">_lag7&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">shift</span><span class="p">(</span><span class="mi">7</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="rolling-statistics">
<h4>4.3 Rolling Statistics<a class="headerlink" href="#rolling-statistics" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Rolling averages for trend analysis</span>
<span class="n">window_sizes</span> <span class="o">=</span> <span class="p">[</span><span class="mi">7</span><span class="p">,</span> <span class="mi">14</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
<span class="k">for</span> <span class="n">window</span> <span class="ow">in</span> <span class="n">window_sizes</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">numeric_columns</span><span class="p">:</span>
        <span class="n">data</span><span class="p">[</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s1">_ma</span><span class="si">{</span><span class="n">window</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">rolling</span><span class="p">(</span><span class="n">window</span><span class="o">=</span><span class="n">window</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>
<section id="data-scaling-and-normalization">
<h3>5. Data Scaling and Normalization<a class="headerlink" href="#data-scaling-and-normalization" title="Permalink to this heading"></a></h3>
<section id="minmax-scaling">
<h4>5.1 MinMax Scaling<a class="headerlink" href="#minmax-scaling" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span><span class="w"> </span><span class="nn">sklearn.preprocessing</span><span class="w"> </span><span class="kn">import</span> <span class="n">MinMaxScaler</span>

<span class="c1"># Initialize scalers for each feature</span>
<span class="n">scalers</span> <span class="o">=</span> <span class="p">{}</span>
<span class="n">scaled_data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">data</span><span class="p">[</span><span class="n">column</span><span class="p">]</span><span class="o">.</span><span class="n">dtype</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;float64&#39;</span><span class="p">,</span> <span class="s1">&#39;int64&#39;</span><span class="p">]:</span>
        <span class="n">scaler</span> <span class="o">=</span> <span class="n">MinMaxScaler</span><span class="p">()</span>
        <span class="n">scaled_data</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">scaler</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">data</span><span class="p">[[</span><span class="n">column</span><span class="p">]])</span>
        <span class="n">scalers</span><span class="p">[</span><span class="n">column</span><span class="p">]</span> <span class="o">=</span> <span class="n">scaler</span>
</pre></div>
</div>
</section>
<section id="feature-selection">
<h4>5.2 Feature Selection<a class="headerlink" href="#feature-selection" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Correlation-based feature selection</p></li>
<li><p>Importance ranking using statistical tests</p></li>
<li><p>Dimensionality reduction considerations</p></li>
</ul>
</section>
</section>
<section id="train-test-split">
<h3>6. Train-Test Split<a class="headerlink" href="#train-test-split" title="Permalink to this heading"></a></h3>
<section id="temporal-split-strategy">
<h4>6.1 Temporal Split Strategy<a class="headerlink" href="#temporal-split-strategy" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Chronological split to maintain temporal order</span>
<span class="n">split_date</span> <span class="o">=</span> <span class="s1">&#39;2019-12-31&#39;</span>
<span class="n">train_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[:</span><span class="n">split_date</span><span class="p">]</span>
<span class="n">test_data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">split_date</span><span class="p">:]</span>

<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Training data: </span><span class="si">{</span><span class="n">train_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Testing data: </span><span class="si">{</span><span class="n">test_data</span><span class="o">.</span><span class="n">shape</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="validation-set-creation">
<h4>6.2 Validation Set Creation<a class="headerlink" href="#validation-set-creation" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Further split training data for validation</span>
<span class="n">val_split_date</span> <span class="o">=</span> <span class="s1">&#39;2019-10-31&#39;</span>
<span class="n">train_subset</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[:</span><span class="n">val_split_date</span><span class="p">]</span>
<span class="n">val_subset</span> <span class="o">=</span> <span class="n">train_data</span><span class="p">[</span><span class="n">val_split_date</span><span class="p">:]</span>
</pre></div>
</div>
</section>
</section>
<section id="sequence-generation-for-lstm">
<h3>7. Sequence Generation for LSTM<a class="headerlink" href="#sequence-generation-for-lstm" title="Permalink to this heading"></a></h3>
<section id="time-series-sequence-creation">
<h4>7.1 Time Series Sequence Creation<a class="headerlink" href="#time-series-sequence-creation" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_sequences</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">target_column</span><span class="p">,</span> <span class="n">sequence_length</span><span class="o">=</span><span class="mi">30</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Create sequences for LSTM training.</span>
<span class="sd">    </span>
<span class="sd">    Args:</span>
<span class="sd">        data: Input dataframe</span>
<span class="sd">        target_column: Target variable name</span>
<span class="sd">        sequence_length: Length of input sequences</span>
<span class="sd">    </span>
<span class="sd">    Returns:</span>
<span class="sd">        X_sequences, y_values</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">X</span><span class="p">,</span> <span class="n">y</span> <span class="o">=</span> <span class="p">[],</span> <span class="p">[]</span>
    
    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">sequence_length</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
        <span class="n">X</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="o">-</span><span class="n">sequence_length</span><span class="p">:</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">values</span><span class="p">)</span>
        <span class="n">y</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">data</span><span class="p">[</span><span class="n">target_column</span><span class="p">]</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
    
    <span class="k">return</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">X</span><span class="p">),</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="multi-step-prediction-preparation">
<h4>7.2 Multi-step Prediction Preparation<a class="headerlink" href="#multi-step-prediction-preparation" title="Permalink to this heading"></a></h4>
<ul class="simple">
<li><p>Sequence generation for different prediction horizons</p></li>
<li><p>Feature-target alignment</p></li>
<li><p>Batch preparation for model training</p></li>
</ul>
</section>
</section>
<section id="data-export-and-persistence">
<h3>8. Data Export and Persistence<a class="headerlink" href="#data-export-and-persistence" title="Permalink to this heading"></a></h3>
<section id="processed-data-export">
<h4>8.1 Processed Data Export<a class="headerlink" href="#processed-data-export" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Save processed datasets</span>
<span class="n">train_data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;Data/train_data.csv&quot;</span><span class="p">)</span>
<span class="n">test_data</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s2">&quot;Data/test_data.csv&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="scaler-persistence">
<h4>8.2 Scaler Persistence<a class="headerlink" href="#scaler-persistence" title="Permalink to this heading"></a></h4>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">joblib</span>

<span class="c1"># Save scalers for later use</span>
<span class="k">for</span> <span class="n">column</span><span class="p">,</span> <span class="n">scaler</span> <span class="ow">in</span> <span class="n">scalers</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="n">joblib</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">scaler</span><span class="p">,</span> <span class="sa">f</span><span class="s2">&quot;Notebooks/scalers/</span><span class="si">{</span><span class="n">column</span><span class="si">}</span><span class="s2">_scaler.pkl&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="key-visualizations">
<h2>Key Visualizations<a class="headerlink" href="#key-visualizations" title="Permalink to this heading"></a></h2>
<section id="time-series-plots">
<h3>1. Time Series Plots<a class="headerlink" href="#time-series-plots" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Historical trends for all variables</p></li>
<li><p>Seasonal patterns visualization</p></li>
<li><p>Anomaly identification</p></li>
</ul>
</section>
<section id="distribution-analysis">
<h3>2. Distribution Analysis<a class="headerlink" href="#distribution-analysis" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Histograms and density plots</p></li>
<li><p>Box plots for outlier visualization</p></li>
<li><p>Q-Q plots for normality assessment</p></li>
</ul>
</section>
<section id="correlation-heatmaps">
<h3>3. Correlation Heatmaps<a class="headerlink" href="#correlation-heatmaps" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Feature correlation matrix</p></li>
<li><p>Target variable correlations</p></li>
<li><p>Lagged correlation analysis</p></li>
</ul>
</section>
<section id="seasonal-decomposition">
<h3>4. Seasonal Decomposition<a class="headerlink" href="#seasonal-decomposition" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Trend component extraction</p></li>
<li><p>Seasonal pattern analysis</p></li>
<li><p>Residual component examination</p></li>
</ul>
</section>
</section>
<section id="data-quality-metrics">
<h2>Data Quality Metrics<a class="headerlink" href="#data-quality-metrics" title="Permalink to this heading"></a></h2>
<section id="completeness">
<h3>Completeness<a class="headerlink" href="#completeness" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Missing Values</strong>: &lt; 0.1% across all features</p></li>
<li><p><strong>Data Coverage</strong>: Complete temporal coverage from 2018-01-01</p></li>
</ul>
</section>
<section id="consistency">
<h3>Consistency<a class="headerlink" href="#consistency" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Unit Standardization</strong>: All measurements in consistent units</p></li>
<li><p><strong>Temporal Alignment</strong>: Daily frequency maintained</p></li>
<li><p><strong>Range Validation</strong>: All values within expected physical limits</p></li>
</ul>
</section>
<section id="reliability">
<h3>Reliability<a class="headerlink" href="#reliability" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p><strong>Outlier Percentage</strong>: &lt; 2% of total observations</p></li>
<li><p><strong>Data Source Validation</strong>: Meteorological data verified against external sources</p></li>
<li><p><strong>Temporal Consistency</strong>: No gaps in time series</p></li>
</ul>
</section>
</section>
<section id="performance-considerations">
<h2>Performance Considerations<a class="headerlink" href="#performance-considerations" title="Permalink to this heading"></a></h2>
<section id="memory-optimization">
<h3>Memory Optimization<a class="headerlink" href="#memory-optimization" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Efficient data types selection</p></li>
<li><p>Chunked processing for large datasets</p></li>
<li><p>Memory usage monitoring</p></li>
</ul>
</section>
<section id="processing-speed">
<h3>Processing Speed<a class="headerlink" href="#processing-speed" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Vectorized operations for feature engineering</p></li>
<li><p>Parallel processing for multiple time series</p></li>
<li><p>Optimized sequence generation</p></li>
</ul>
</section>
</section>
<section id="output-files">
<h2>Output Files<a class="headerlink" href="#output-files" title="Permalink to this heading"></a></h2>
<p>The notebook generates the following outputs:</p>
<ol class="arabic simple">
<li><p><strong>Processed Datasets:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">train_data.csv</span></code>: Training dataset (2018-2019)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">test_data.csv</span></code>: Testing dataset (2020+)</p></li>
</ul>
</li>
<li><p><strong>Scalers:</strong></p>
<ul class="simple">
<li><p>Individual scaler files for each feature</p></li>
<li><p>Saved in <code class="docutils literal notranslate"><span class="pre">Notebooks/scalers/</span></code> directory</p></li>
</ul>
</li>
<li><p><strong>Visualization Assets:</strong></p>
<ul class="simple">
<li><p>EDA plots and charts</p></li>
<li><p>Data quality reports</p></li>
<li><p>Feature importance rankings</p></li>
</ul>
</li>
</ol>
</section>
<section id="next-steps">
<h2>Next Steps<a class="headerlink" href="#next-steps" title="Permalink to this heading"></a></h2>
<p>After running this notebook:</p>
<ol class="arabic simple">
<li><p>Proceed to <a class="reference internal" href="../tutorials/model_training.html"><span class="doc">Model Training Tutorial</span></a> for LSTM model development</p></li>
<li><p>Review <a class="reference internal" href="lstm_generation.html"><span class="doc">LSTM Generation Notebook</span></a> for model architecture implementation</p></li>
<li><p>Explore <a class="reference internal" href="predicting_365_days.html"><span class="doc">Predicting Next 365 Days Notebook</span></a> for long-term forecasting</p></li>
</ol>
</section>
<section id="dependencies">
<h2>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this heading"></a></h2>
<p>Required packages for this notebook:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">pandas</span></code>: Data manipulation</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">numpy</span></code>: Numerical computing</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">matplotlib</span></code>: Basic plotting</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seaborn</span></code>: Statistical visualization</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scikit-learn</span></code>: Preprocessing utilities</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scipy</span></code>: Statistical functions</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Energy Analysis Team.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>