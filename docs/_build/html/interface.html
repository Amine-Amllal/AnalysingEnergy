

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Interface utilisateur &mdash; AnalysingGreenEnergy 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=f2a433a1"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
      <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dépannage et Résolution de Problèmes" href="troubleshooting.html" />
    <link rel="prev" title="Évaluation des Modèles" href="model_evaluation.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #2980B9" >

          
          
          <a href="index.html" class="icon icon-home">
            AnalysingGreenEnergy
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Guide d'utilisation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Démarrage rapide</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_description.html">Description des données</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Analyse des données</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="data_analysis.html">Analyse des Données</a></li>
<li class="toctree-l1"><a class="reference internal" href="preprocessing.html">Prétraitement des Données</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modélisation</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="lstm_models.html">Modèles LSTM</a></li>
<li class="toctree-l1"><a class="reference internal" href="hyperparameter_optimization.html">Optimisation des hyperparamètres</a></li>
<li class="toctree-l1"><a class="reference internal" href="model_evaluation.html">Évaluation des Modèles</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Interface utilisateur</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Interface utilisateur</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#vue-d-ensemble-de-l-interface">Vue d’ensemble de l’interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#architecture-de-l-application">Architecture de l’application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#structure-du-code">Structure du code</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-et-parametres">Configuration et paramètres</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fonctionnalites-principales">Fonctionnalités principales</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#generation-de-donnees">Génération de données</a></li>
<li class="toctree-l3"><a class="reference internal" href="#visualisations-interactives">Visualisations interactives</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dashboard-principal">Dashboard principal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fonctionnalites-avancees">Fonctionnalités avancées</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#integration-des-modeles-lstm">Intégration des modèles LSTM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#analyse-comparative">Analyse comparative</a></li>
<li class="toctree-l3"><a class="reference internal" href="#export-et-rapports">Export et rapports</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#configuration-avancee">Configuration avancée</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#personnalisation-de-l-interface">Personnalisation de l’interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gestion-des-erreurs">Gestion des erreurs</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#performance-et-optimisation">Performance et optimisation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mise-en-cache">Mise en cache</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-des-sessions">Configuration des sessions</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#deploiement-de-l-application">Déploiement de l’application</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-locale">Configuration locale</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-pour-production">Configuration pour production</a></li>
<li class="toctree-l3"><a class="reference internal" href="#deploiement-docker">Déploiement Docker</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#utilisation-pratique">Utilisation pratique</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#guide-d-utilisation">Guide d’utilisation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cas-d-usage-typiques">Cas d’usage typiques</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#prochaines-etapes">Prochaines étapes</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Annexes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Dépannage et Résolution de Problèmes</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Questions Fréquentes (FAQ)</a></li>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #2980B9" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">AnalysingGreenEnergy</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Interface utilisateur</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/your-username/AnalysingEnergy/blob/main/docs/interface.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="interface-utilisateur">
<h1>Interface utilisateur<a class="headerlink" href="#interface-utilisateur" title="Link to this heading"></a></h1>
<p>Cette section présente l’application Streamlit qui offre une interface interactive pour visualiser et analyser les prédictions de production d’énergie.</p>
<section id="vue-d-ensemble-de-l-interface">
<h2>Vue d’ensemble de l’interface<a class="headerlink" href="#vue-d-ensemble-de-l-interface" title="Link to this heading"></a></h2>
<p>L’application Streamlit (<cite>interface/app.py</cite>) fournit une interface web conviviale permettant aux utilisateurs de :</p>
<ul class="simple">
<li><p>Visualiser les données de production et consommation d’énergie</p></li>
<li><p>Ajuster les paramètres d’analyse interactivement</p></li>
<li><p>Comparer différents scénarios</p></li>
<li><p>Exporter les résultats</p></li>
</ul>
</section>
<section id="architecture-de-l-application">
<h2>Architecture de l’application<a class="headerlink" href="#architecture-de-l-application" title="Link to this heading"></a></h2>
<section id="structure-du-code">
<h3>Structure du code<a class="headerlink" href="#structure-du-code" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># interface/app.py</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">streamlit</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">st</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">numpy</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">np</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">pandas</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">pd</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">matplotlib.pyplot</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="nn">plt</span>

<span class="c1"># Configuration de la page</span>
<span class="n">st</span><span class="o">.</span><span class="n">set_page_config</span><span class="p">(</span>
    <span class="n">page_title</span><span class="o">=</span><span class="s2">&quot;🔋 Analyse Production vs Consommation&quot;</span><span class="p">,</span>
    <span class="n">layout</span><span class="o">=</span><span class="s2">&quot;centered&quot;</span>
<span class="p">)</span>

<span class="c1"># Interface principale</span>
<span class="k">def</span><span class="w"> </span><span class="nf">main</span><span class="p">():</span>
    <span class="n">st</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s2">&quot;🔍 Analyse de la Production vs la Consommation d&#39;Énergie&quot;</span><span class="p">)</span>

    <span class="c1"># Sidebar pour les contrôles</span>
    <span class="n">sidebar_controls</span><span class="p">()</span>

    <span class="c1"># Contenu principal</span>
    <span class="n">main_content</span><span class="p">()</span>

    <span class="c1"># Pied de page</span>
    <span class="n">footer</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="configuration-et-parametres">
<h3>Configuration et paramètres<a class="headerlink" href="#configuration-et-parametres" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">sidebar_controls</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration des contrôles dans la barre latérale.&quot;&quot;&quot;</span>

    <span class="n">st</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s2">&quot;⚙️ Paramètres d&#39;analyse&quot;</span><span class="p">)</span>

    <span class="c1"># Sélection de la période</span>
    <span class="n">nb_jours</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span>
        <span class="s2">&quot;📅 Nombre de jours à analyser&quot;</span><span class="p">,</span>
        <span class="n">min_value</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">max_value</span><span class="o">=</span><span class="mi">365</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Choisissez la période d&#39;analyse&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Type de données</span>
    <span class="n">data_source</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">selectbox</span><span class="p">(</span>
        <span class="s2">&quot;📊 Source des données&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;Données simulées&quot;</span><span class="p">,</span> <span class="s2">&quot;Données historiques&quot;</span><span class="p">,</span> <span class="s2">&quot;Prédictions&quot;</span><span class="p">],</span>
        <span class="n">help</span><span class="o">=</span><span class="s2">&quot;Sélectionnez le type de données à afficher&quot;</span>
    <span class="p">)</span>

    <span class="c1"># Options d&#39;affichage</span>
    <span class="n">show_trends</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span><span class="s2">&quot;📈 Afficher les tendances&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
    <span class="n">show_statistics</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">sidebar</span><span class="o">.</span><span class="n">checkbox</span><span class="p">(</span><span class="s2">&quot;📋 Afficher les statistiques&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">nb_jours</span><span class="p">,</span> <span class="n">data_source</span><span class="p">,</span> <span class="n">show_trends</span><span class="p">,</span> <span class="n">show_statistics</span>
</pre></div>
</div>
</section>
</section>
<section id="fonctionnalites-principales">
<h2>Fonctionnalités principales<a class="headerlink" href="#fonctionnalites-principales" title="Link to this heading"></a></h2>
<section id="generation-de-donnees">
<h3>Génération de données<a class="headerlink" href="#generation-de-donnees" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">generate_sample_data</span><span class="p">(</span><span class="n">nb_jours</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Génère des données d&#39;exemple pour la démonstration.&quot;&quot;&quot;</span>

    <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">seed</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span>  <span class="c1"># Reproductibilité</span>

    <span class="c1"># Génération avec patterns réalistes</span>
    <span class="n">base_generation</span> <span class="o">=</span> <span class="mi">500</span>
    <span class="n">base_consumption</span> <span class="o">=</span> <span class="mi">450</span>

    <span class="c1"># Variation saisonnière</span>
    <span class="n">days</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="n">nb_jours</span><span class="p">)</span>
    <span class="n">seasonal_factor</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mf">0.3</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">days</span> <span class="o">/</span> <span class="mi">365</span><span class="p">)</span>

    <span class="c1"># Variation hebdomadaire</span>
    <span class="n">weekly_factor</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">+</span> <span class="mf">0.1</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">sin</span><span class="p">(</span><span class="mi">2</span> <span class="o">*</span> <span class="n">np</span><span class="o">.</span><span class="n">pi</span> <span class="o">*</span> <span class="n">days</span> <span class="o">/</span> <span class="mi">7</span><span class="p">)</span>

    <span class="c1"># Bruit aléatoire</span>
    <span class="n">noise</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">nb_jours</span><span class="p">)</span>

    <span class="n">generation</span> <span class="o">=</span> <span class="n">base_generation</span> <span class="o">*</span> <span class="n">seasonal_factor</span> <span class="o">*</span> <span class="n">weekly_factor</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">noise</span><span class="p">)</span>
    <span class="n">consommation</span> <span class="o">=</span> <span class="n">base_consumption</span> <span class="o">*</span> <span class="n">seasonal_factor</span> <span class="o">*</span> <span class="n">weekly_factor</span> <span class="o">*</span> <span class="p">(</span><span class="mi">1</span> <span class="o">+</span> <span class="n">noise</span> <span class="o">*</span> <span class="mf">1.2</span><span class="p">)</span>

    <span class="c1"># Assurer des valeurs positives</span>
    <span class="n">generation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">generation</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">1000</span><span class="p">)</span>
    <span class="n">consommation</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">consommation</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">900</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">generation</span><span class="p">,</span> <span class="n">consommation</span>
</pre></div>
</div>
</section>
<section id="visualisations-interactives">
<h3>Visualisations interactives<a class="headerlink" href="#visualisations-interactives" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">create_energy_plot</span><span class="p">(</span><span class="n">generation</span><span class="p">,</span> <span class="n">consommation</span><span class="p">,</span> <span class="n">jours</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Crée un graphique interactif de production vs consommation.&quot;&quot;&quot;</span>

    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>

    <span class="c1"># Graphiques en aires</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">)),</span> <span class="n">generation</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                   <span class="n">color</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;🔋 Énergie Générée&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">fill_between</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">)),</span> <span class="n">consommation</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span>
                   <span class="n">color</span><span class="o">=</span><span class="s1">&#39;orange&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;⚡ Énergie Consommée&#39;</span><span class="p">)</span>

    <span class="c1"># Ligne de différence</span>
    <span class="n">difference</span> <span class="o">=</span> <span class="n">generation</span> <span class="o">-</span> <span class="n">consommation</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">)),</span> <span class="n">difference</span><span class="p">,</span> <span class="s1">&#39;r--&#39;</span><span class="p">,</span> <span class="n">linewidth</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
           <span class="n">label</span><span class="o">=</span><span class="s1">&#39;📊 Différence (Production - Consommation)&#39;</span><span class="p">)</span>

    <span class="c1"># Personnalisation</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Période&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Énergie (MW)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Production vs Consommation d</span><span class="se">\&#39;</span><span class="s1">Énergie&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

    <span class="c1"># Rotation des labels si nombreux</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span><span class="p">)))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">([</span><span class="n">jours</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">),</span> <span class="nb">max</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">)</span><span class="o">//</span><span class="mi">10</span><span class="p">))],</span>
                          <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">jours</span><span class="p">)))</span>
        <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">jours</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">)</span>

    <span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">fig</span>
</pre></div>
</div>
</section>
<section id="dashboard-principal">
<h3>Dashboard principal<a class="headerlink" href="#dashboard-principal" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">main_dashboard</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface principale du dashboard.&quot;&quot;&quot;</span>

    <span class="c1"># Métriques en haut de page</span>
    <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span><span class="p">,</span> <span class="n">col3</span><span class="p">,</span> <span class="n">col4</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>

    <span class="k">with</span> <span class="n">col1</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;🔋 Production Moyenne&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">generation</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">,</span>
            <span class="n">delta</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">generation</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">500</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">with</span> <span class="n">col2</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;⚡ Consommation Moyenne&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">consommation</span><span class="p">)</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> MW&quot;</span><span class="p">,</span>
            <span class="n">delta</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">(</span><span class="n">consommation</span><span class="p">)</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">450</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="k">with</span> <span class="n">col3</span><span class="p">:</span>
        <span class="n">excess</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">maximum</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">generation</span> <span class="o">-</span> <span class="n">consommation</span><span class="p">))</span>
        <span class="n">st</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;📈 Surplus Total&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">excess</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2"> MWh&quot;</span><span class="p">,</span>
            <span class="n">delta</span><span class="o">=</span><span class="s2">&quot;Positif&quot;</span> <span class="k">if</span> <span class="n">excess</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="s2">&quot;Négatif&quot;</span>
        <span class="p">)</span>

    <span class="k">with</span> <span class="n">col4</span><span class="p">:</span>
        <span class="n">efficiency</span> <span class="o">=</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">generation</span><span class="p">,</span> <span class="n">consommation</span><span class="p">))</span> <span class="o">/</span>
                     <span class="n">np</span><span class="o">.</span><span class="n">sum</span><span class="p">(</span><span class="n">consommation</span><span class="p">)</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
        <span class="n">st</span><span class="o">.</span><span class="n">metric</span><span class="p">(</span>
            <span class="n">label</span><span class="o">=</span><span class="s2">&quot;⚡ Efficacité&quot;</span><span class="p">,</span>
            <span class="n">value</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">efficiency</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span><span class="p">,</span>
            <span class="n">delta</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">efficiency</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">85</span><span class="si">:</span><span class="s2">.1f</span><span class="si">}</span><span class="s2">%&quot;</span>
        <span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="fonctionnalites-avancees">
<h2>Fonctionnalités avancées<a class="headerlink" href="#fonctionnalites-avancees" title="Link to this heading"></a></h2>
<section id="integration-des-modeles-lstm">
<h3>Intégration des modèles LSTM<a class="headerlink" href="#integration-des-modeles-lstm" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@st</span><span class="o">.</span><span class="n">cache_resource</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_trained_models</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Charge les modèles LSTM pré-entraînés.&quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">tensorflow.keras.models</span><span class="w"> </span><span class="kn">import</span> <span class="n">load_model</span>
        <span class="kn">import</span><span class="w"> </span><span class="nn">joblib</span>

        <span class="c1"># Charger le modèle principal</span>
        <span class="n">model</span> <span class="o">=</span> <span class="n">load_model</span><span class="p">(</span><span class="s1">&#39;Notebooks/models/final_model 291.19.h5&#39;</span><span class="p">)</span>

        <span class="c1"># Charger les scalers</span>
        <span class="n">scaler_X</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;Notebooks/scalers/X_train_scaler.pkl&#39;</span><span class="p">)</span>
        <span class="n">scaler_y</span> <span class="o">=</span> <span class="n">joblib</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="s1">&#39;Notebooks/scalers/y_train_scaler.pkl&#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">model</span><span class="p">,</span> <span class="n">scaler_X</span><span class="p">,</span> <span class="n">scaler_y</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Erreur lors du chargement des modèles: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="kc">None</span>

<span class="k">def</span><span class="w"> </span><span class="nf">prediction_interface</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface pour les prédictions avec modèles LSTM.&quot;&quot;&quot;</span>

    <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s2">&quot;🤖 Prédictions avec Intelligence Artificielle&quot;</span><span class="p">)</span>

    <span class="n">model</span><span class="p">,</span> <span class="n">scaler_X</span><span class="p">,</span> <span class="n">scaler_y</span> <span class="o">=</span> <span class="n">load_trained_models</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">model</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="s2">&quot;✅ Modèles chargés avec succès&quot;</span><span class="p">)</span>

        <span class="c1"># Interface de prédiction</span>
        <span class="n">col1</span><span class="p">,</span> <span class="n">col2</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">columns</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">col1</span><span class="p">:</span>
            <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="s2">&quot;📊 Paramètres météorologiques&quot;</span><span class="p">)</span>
            <span class="n">temp_max</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="s2">&quot;Température max (°C)&quot;</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">40</span><span class="p">,</span> <span class="mi">25</span><span class="p">)</span>
            <span class="n">temp_min</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="s2">&quot;Température min (°C)&quot;</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">30</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
            <span class="n">wind_speed</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="s2">&quot;Vitesse du vent (m/s)&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
            <span class="n">pressure</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="s2">&quot;Pression (kPa)&quot;</span><span class="p">,</span> <span class="mi">98</span><span class="p">,</span> <span class="mi">105</span><span class="p">,</span> <span class="mi">101</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">col2</span><span class="p">:</span>
            <span class="n">st</span><span class="o">.</span><span class="n">subheader</span><span class="p">(</span><span class="s2">&quot;⚡ Paramètres énergétiques&quot;</span><span class="p">)</span>
            <span class="n">demand</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">slider</span><span class="p">(</span><span class="s2">&quot;Demande totale (MW)&quot;</span><span class="p">,</span> <span class="mi">4000</span><span class="p">,</span> <span class="mi">10000</span><span class="p">,</span> <span class="mi">7000</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s2">&quot;🔮 Prédire la production&quot;</span><span class="p">):</span>
                <span class="c1"># Préparer les données d&#39;entrée</span>
                <span class="n">input_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([[</span><span class="n">temp_max</span><span class="p">,</span> <span class="n">temp_min</span><span class="p">,</span> <span class="p">(</span><span class="n">temp_max</span><span class="o">+</span><span class="n">temp_min</span><span class="p">)</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span>
                                      <span class="n">pressure</span><span class="o">*</span><span class="mi">1000</span><span class="p">,</span> <span class="n">wind_speed</span><span class="o">*</span><span class="mf">1.2</span><span class="p">,</span> <span class="n">wind_speed</span><span class="o">*</span><span class="mf">0.8</span><span class="p">,</span>
                                      <span class="n">wind_speed</span><span class="p">,</span> <span class="mf">0.1</span><span class="p">,</span> <span class="n">demand</span><span class="p">]])</span>

                <span class="c1"># Normaliser</span>
                <span class="n">input_scaled</span> <span class="o">=</span> <span class="n">scaler_X</span><span class="o">.</span><span class="n">transform</span><span class="p">(</span><span class="n">input_data</span><span class="p">)</span>
                <span class="n">input_reshaped</span> <span class="o">=</span> <span class="n">input_scaled</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">)</span>

                <span class="c1"># Prédiction</span>
                <span class="n">pred_scaled</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">input_reshaped</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
                <span class="n">prediction</span> <span class="o">=</span> <span class="n">scaler_y</span><span class="o">.</span><span class="n">inverse_transform</span><span class="p">(</span><span class="n">pred_scaled</span><span class="p">)[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span>

                <span class="c1"># Affichage du résultat</span>
                <span class="n">st</span><span class="o">.</span><span class="n">success</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;🎯 Production prédite: **</span><span class="si">{</span><span class="n">prediction</span><span class="si">:</span><span class="s2">.0f</span><span class="si">}</span><span class="s2"> MW**&quot;</span><span class="p">)</span>

                <span class="c1"># Analyse comparative</span>
                <span class="k">if</span> <span class="n">prediction</span> <span class="o">&gt;</span> <span class="n">demand</span><span class="p">:</span>
                    <span class="n">st</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;💚 Surplus de production prévu&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">st</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;⚠️ Déficit de production possible&quot;</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;❌ Impossible de charger les modèles&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="analyse-comparative">
<h3>Analyse comparative<a class="headerlink" href="#analyse-comparative" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">comparative_analysis</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Interface d&#39;analyse comparative.&quot;&quot;&quot;</span>

    <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s2">&quot;📊 Analyse Comparative&quot;</span><span class="p">)</span>

    <span class="c1"># Sélection de scénarios</span>
    <span class="n">scenario_type</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">selectbox</span><span class="p">(</span>
        <span class="s2">&quot;Choisissez le type d&#39;analyse&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;Comparaison mensuelle&quot;</span><span class="p">,</span> <span class="s2">&quot;Analyse saisonnière&quot;</span><span class="p">,</span> <span class="s2">&quot;Scénarios d&#39;optimisation&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">scenario_type</span> <span class="o">==</span> <span class="s2">&quot;Comparaison mensuelle&quot;</span><span class="p">:</span>
        <span class="n">monthly_comparison</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">scenario_type</span> <span class="o">==</span> <span class="s2">&quot;Analyse saisonnière&quot;</span><span class="p">:</span>
        <span class="n">seasonal_analysis</span><span class="p">()</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">optimization_scenarios</span><span class="p">()</span>

<span class="k">def</span><span class="w"> </span><span class="nf">monthly_comparison</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Comparaison mensuelle de production.&quot;&quot;&quot;</span>

    <span class="n">months</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Jan&#39;</span><span class="p">,</span> <span class="s1">&#39;Fév&#39;</span><span class="p">,</span> <span class="s1">&#39;Mar&#39;</span><span class="p">,</span> <span class="s1">&#39;Avr&#39;</span><span class="p">,</span> <span class="s1">&#39;Mai&#39;</span><span class="p">,</span> <span class="s1">&#39;Jun&#39;</span><span class="p">,</span>
             <span class="s1">&#39;Jul&#39;</span><span class="p">,</span> <span class="s1">&#39;Aoû&#39;</span><span class="p">,</span> <span class="s1">&#39;Sep&#39;</span><span class="p">,</span> <span class="s1">&#39;Oct&#39;</span><span class="p">,</span> <span class="s1">&#39;Nov&#39;</span><span class="p">,</span> <span class="s1">&#39;Déc&#39;</span><span class="p">]</span>

    <span class="c1"># Données simulées pour chaque mois</span>
    <span class="n">production_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">6500</span><span class="p">,</span> <span class="mi">800</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>
    <span class="n">consumption_data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">normal</span><span class="p">(</span><span class="mi">6200</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">12</span><span class="p">)</span>

    <span class="c1"># Graphique en barres</span>
    <span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

    <span class="n">x</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">months</span><span class="p">))</span>
    <span class="n">width</span> <span class="o">=</span> <span class="mf">0.35</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">production_data</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Production&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="n">width</span><span class="o">/</span><span class="mi">2</span><span class="p">,</span> <span class="n">consumption_data</span><span class="p">,</span> <span class="n">width</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Consommation&#39;</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.8</span><span class="p">)</span>

    <span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Mois&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Énergie (MW)&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Comparaison Mensuelle Production vs Consommation&#39;</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticks</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">months</span><span class="p">)</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">legend</span><span class="p">()</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">,</span> <span class="n">alpha</span><span class="o">=</span><span class="mf">0.3</span><span class="p">)</span>

    <span class="n">st</span><span class="o">.</span><span class="n">pyplot</span><span class="p">(</span><span class="n">fig</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="export-et-rapports">
<h3>Export et rapports<a class="headerlink" href="#export-et-rapports" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">export_functionality</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Fonctionnalités d&#39;export et de rapports.&quot;&quot;&quot;</span>

    <span class="n">st</span><span class="o">.</span><span class="n">header</span><span class="p">(</span><span class="s2">&quot;📤 Export et Rapports&quot;</span><span class="p">)</span>

    <span class="c1"># Options d&#39;export</span>
    <span class="n">export_format</span> <span class="o">=</span> <span class="n">st</span><span class="o">.</span><span class="n">selectbox</span><span class="p">(</span>
        <span class="s2">&quot;Format d&#39;export&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="s2">&quot;CSV&quot;</span><span class="p">,</span> <span class="s2">&quot;Excel&quot;</span><span class="p">,</span> <span class="s2">&quot;PDF&quot;</span><span class="p">,</span> <span class="s2">&quot;JSON&quot;</span><span class="p">]</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">st</span><span class="o">.</span><span class="n">button</span><span class="p">(</span><span class="s2">&quot;📊 Générer le rapport&quot;</span><span class="p">):</span>

        <span class="c1"># Créer le DataFrame des résultats</span>
        <span class="n">df_results</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span>
            <span class="s1">&#39;Période&#39;</span><span class="p">:</span> <span class="n">jours</span><span class="p">,</span>
            <span class="s1">&#39;Production_MW&#39;</span><span class="p">:</span> <span class="n">generation</span><span class="p">,</span>
            <span class="s1">&#39;Consommation_MW&#39;</span><span class="p">:</span> <span class="n">consommation</span><span class="p">,</span>
            <span class="s1">&#39;Différence_MW&#39;</span><span class="p">:</span> <span class="n">generation</span> <span class="o">-</span> <span class="n">consommation</span><span class="p">,</span>
            <span class="s1">&#39;Efficacité_%&#39;</span><span class="p">:</span> <span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">minimum</span><span class="p">(</span><span class="n">generation</span><span class="p">,</span> <span class="n">consommation</span><span class="p">)</span> <span class="o">/</span> <span class="n">consommation</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
        <span class="p">})</span>

        <span class="k">if</span> <span class="n">export_format</span> <span class="o">==</span> <span class="s2">&quot;CSV&quot;</span><span class="p">:</span>
            <span class="n">csv</span> <span class="o">=</span> <span class="n">df_results</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
            <span class="n">st</span><span class="o">.</span><span class="n">download_button</span><span class="p">(</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;💾 Télécharger CSV&quot;</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">csv</span><span class="p">,</span>
                <span class="n">file_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;analyse_energie_</span><span class="si">{</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">.csv&quot;</span><span class="p">,</span>
                <span class="n">mime</span><span class="o">=</span><span class="s2">&quot;text/csv&quot;</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">export_format</span> <span class="o">==</span> <span class="s2">&quot;Excel&quot;</span><span class="p">:</span>
            <span class="c1"># Utiliser un buffer en mémoire pour Excel</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">io</span><span class="w"> </span><span class="kn">import</span> <span class="n">BytesIO</span>

            <span class="n">buffer</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">pd</span><span class="o">.</span><span class="n">ExcelWriter</span><span class="p">(</span><span class="n">buffer</span><span class="p">,</span> <span class="n">engine</span><span class="o">=</span><span class="s1">&#39;openpyxl&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">writer</span><span class="p">:</span>
                <span class="n">df_results</span><span class="o">.</span><span class="n">to_excel</span><span class="p">(</span><span class="n">writer</span><span class="p">,</span> <span class="n">sheet_name</span><span class="o">=</span><span class="s1">&#39;Analyse_Energie&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

            <span class="n">st</span><span class="o">.</span><span class="n">download_button</span><span class="p">(</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;💾 Télécharger Excel&quot;</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">buffer</span><span class="o">.</span><span class="n">getvalue</span><span class="p">(),</span>
                <span class="n">file_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;analyse_energie_</span><span class="si">{</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">.xlsx&quot;</span><span class="p">,</span>
                <span class="n">mime</span><span class="o">=</span><span class="s2">&quot;application/vnd.openxmlformats-officedocument.spreadsheetml.sheet&quot;</span>
            <span class="p">)</span>

        <span class="k">elif</span> <span class="n">export_format</span> <span class="o">==</span> <span class="s2">&quot;JSON&quot;</span><span class="p">:</span>
            <span class="n">json_data</span> <span class="o">=</span> <span class="n">df_results</span><span class="o">.</span><span class="n">to_json</span><span class="p">(</span><span class="n">orient</span><span class="o">=</span><span class="s1">&#39;records&#39;</span><span class="p">,</span> <span class="n">indent</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
            <span class="n">st</span><span class="o">.</span><span class="n">download_button</span><span class="p">(</span>
                <span class="n">label</span><span class="o">=</span><span class="s2">&quot;💾 Télécharger JSON&quot;</span><span class="p">,</span>
                <span class="n">data</span><span class="o">=</span><span class="n">json_data</span><span class="p">,</span>
                <span class="n">file_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;analyse_energie_</span><span class="si">{</span><span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y%m</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">.json&quot;</span><span class="p">,</span>
                <span class="n">mime</span><span class="o">=</span><span class="s2">&quot;application/json&quot;</span>
            <span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="configuration-avancee">
<h2>Configuration avancée<a class="headerlink" href="#configuration-avancee" title="Link to this heading"></a></h2>
<section id="personnalisation-de-l-interface">
<h3>Personnalisation de l’interface<a class="headerlink" href="#personnalisation-de-l-interface" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">custom_css</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;CSS personnalisé pour l&#39;interface.&quot;&quot;&quot;</span>

    <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    &lt;style&gt;</span>
<span class="s2">    /* Personnalisation de la sidebar */</span>
<span class="s2">    .css-1d391kg {</span>
<span class="s2">        background-color: #f0f2f6;</span>
<span class="s2">    }</span>

<span class="s2">    /* Style des métriques */</span>
<span class="s2">    .metric-container {</span>
<span class="s2">        background-color: white;</span>
<span class="s2">        padding: 10px;</span>
<span class="s2">        border-radius: 10px;</span>
<span class="s2">        box-shadow: 0 2px 4px rgba(0,0,0,0.1);</span>
<span class="s2">    }</span>

<span class="s2">    /* Style des boutons */</span>
<span class="s2">    .stButton &gt; button {</span>
<span class="s2">        background-color: #4CAF50;</span>
<span class="s2">        color: white;</span>
<span class="s2">        border-radius: 5px;</span>
<span class="s2">    }</span>

<span class="s2">    /* Style du titre principal */</span>
<span class="s2">    .main-title {</span>
<span class="s2">        color: #2E8B57;</span>
<span class="s2">        text-align: center;</span>
<span class="s2">        font-size: 2.5em;</span>
<span class="s2">        margin-bottom: 30px;</span>
<span class="s2">    }</span>
<span class="s2">    &lt;/style&gt;</span>
<span class="s2">    &quot;&quot;&quot;</span><span class="p">,</span> <span class="n">unsafe_allow_html</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="gestion-des-erreurs">
<h3>Gestion des erreurs<a class="headerlink" href="#gestion-des-erreurs" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">error_handling</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gestion globale des erreurs de l&#39;application.&quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">main</span><span class="p">()</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Une erreur est survenue dans l&#39;application&quot;</span><span class="p">)</span>

        <span class="k">with</span> <span class="n">st</span><span class="o">.</span><span class="n">expander</span><span class="p">(</span><span class="s2">&quot;Détails de l&#39;erreur&quot;</span><span class="p">):</span>
            <span class="n">st</span><span class="o">.</span><span class="n">code</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">e</span><span class="p">))</span>

        <span class="n">st</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;Suggestions pour résoudre le problème:&quot;</span><span class="p">)</span>
        <span class="n">st</span><span class="o">.</span><span class="n">markdown</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        - Vérifiez que tous les fichiers de données sont présents</span>
<span class="s2">        - Assurez-vous que les modèles sont correctement chargés</span>
<span class="s2">        - Rechargez la page (F5)</span>
<span class="s2">        - Contactez l&#39;administrateur si le problème persiste</span>
<span class="s2">        &quot;&quot;&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="performance-et-optimisation">
<h2>Performance et optimisation<a class="headerlink" href="#performance-et-optimisation" title="Link to this heading"></a></h2>
<section id="mise-en-cache">
<h3>Mise en cache<a class="headerlink" href="#mise-en-cache" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@st</span><span class="o">.</span><span class="n">cache_data</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_historical_data</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Charge les données historiques avec mise en cache.&quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">data</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Data/data.csv&#39;</span><span class="p">,</span> <span class="n">parse_dates</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;date&#39;</span><span class="p">])</span>
        <span class="k">return</span> <span class="n">data</span>
    <span class="k">except</span> <span class="ne">FileNotFoundError</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;Données historiques non trouvées&quot;</span><span class="p">)</span>
        <span class="k">return</span> <span class="kc">None</span>

<span class="nd">@st</span><span class="o">.</span><span class="n">cache_resource</span>
<span class="k">def</span><span class="w"> </span><span class="nf">load_models</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Charge les modèles avec mise en cache des ressources.&quot;&quot;&quot;</span>

    <span class="c1"># Cette fonction ne sera exécutée qu&#39;une seule fois</span>
    <span class="k">return</span> <span class="n">load_trained_models</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="configuration-des-sessions">
<h3>Configuration des sessions<a class="headerlink" href="#configuration-des-sessions" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span><span class="w"> </span><span class="nf">init_session_state</span><span class="p">():</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialise l&#39;état de session de Streamlit.&quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="s1">&#39;analysis_params&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">analysis_params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s1">&#39;nb_jours&#39;</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
            <span class="s1">&#39;data_source&#39;</span><span class="p">:</span> <span class="s1">&#39;Données simulées&#39;</span><span class="p">,</span>
            <span class="s1">&#39;last_update&#39;</span><span class="p">:</span> <span class="n">pd</span><span class="o">.</span><span class="n">Timestamp</span><span class="o">.</span><span class="n">now</span><span class="p">()</span>
        <span class="p">}</span>

    <span class="k">if</span> <span class="s1">&#39;cached_predictions&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="p">:</span>
        <span class="n">st</span><span class="o">.</span><span class="n">session_state</span><span class="o">.</span><span class="n">cached_predictions</span> <span class="o">=</span> <span class="p">{}</span>
</pre></div>
</div>
</section>
</section>
<section id="deploiement-de-l-application">
<h2>Déploiement de l’application<a class="headerlink" href="#deploiement-de-l-application" title="Link to this heading"></a></h2>
<section id="configuration-locale">
<h3>Configuration locale<a class="headerlink" href="#configuration-locale" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Lancement en local</span>
streamlit<span class="w"> </span>run<span class="w"> </span>interface/app.py

<span class="c1"># Avec port personnalisé</span>
streamlit<span class="w"> </span>run<span class="w"> </span>interface/app.py<span class="w"> </span>--server.port<span class="w"> </span><span class="m">8502</span>

<span class="c1"># Avec configuration avancée</span>
streamlit<span class="w"> </span>run<span class="w"> </span>interface/app.py<span class="w"> </span>--server.headless<span class="w"> </span><span class="nb">true</span><span class="w"> </span>--server.port<span class="w"> </span><span class="m">8501</span>
</pre></div>
</div>
</section>
<section id="configuration-pour-production">
<h3>Configuration pour production<a class="headerlink" href="#configuration-pour-production" title="Link to this heading"></a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># config.toml pour Streamlit</span>
<span class="p">[</span><span class="n">server</span><span class="p">]</span>
<span class="n">port</span> <span class="o">=</span> <span class="mi">8501</span>
<span class="n">enableCORS</span> <span class="o">=</span> <span class="n">false</span>
<span class="n">enableXsrfProtection</span> <span class="o">=</span> <span class="n">false</span>

<span class="p">[</span><span class="n">browser</span><span class="p">]</span>
<span class="n">gatherUsageStats</span> <span class="o">=</span> <span class="n">false</span>

<span class="p">[</span><span class="n">theme</span><span class="p">]</span>
<span class="n">primaryColor</span> <span class="o">=</span> <span class="s2">&quot;#4CAF50&quot;</span>
<span class="n">backgroundColor</span> <span class="o">=</span> <span class="s2">&quot;#FFFFFF&quot;</span>
<span class="n">secondaryBackgroundColor</span> <span class="o">=</span> <span class="s2">&quot;#F0F2F6&quot;</span>
<span class="n">textColor</span> <span class="o">=</span> <span class="s2">&quot;#262730&quot;</span>
</pre></div>
</div>
</section>
<section id="deploiement-docker">
<h3>Déploiement Docker<a class="headerlink" href="#deploiement-docker" title="Link to this heading"></a></h3>
<div class="highlight-dockerfile notranslate"><div class="highlight"><pre><span></span><span class="c"># Dockerfile</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9-slim</span>

<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/app</span>

<span class="k">COPY</span><span class="w"> </span>requirements.txt<span class="w"> </span>.
<span class="k">RUN</span><span class="w"> </span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>requirements.txt

<span class="k">COPY</span><span class="w"> </span>.<span class="w"> </span>.

<span class="k">EXPOSE</span><span class="w"> </span><span class="s">8501</span>

<span class="k">HEALTHCHECK</span><span class="w"> </span><span class="k">CMD</span><span class="w"> </span>curl<span class="w"> </span>--fail<span class="w"> </span>http://localhost:8501/_stcore/health

<span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;streamlit&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;run&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;interface/app.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--server.port=8501&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;--server.address=0.0.0.0&quot;</span><span class="p">]</span>
</pre></div>
</div>
</section>
</section>
<section id="utilisation-pratique">
<h2>Utilisation pratique<a class="headerlink" href="#utilisation-pratique" title="Link to this heading"></a></h2>
<section id="guide-d-utilisation">
<h3>Guide d’utilisation<a class="headerlink" href="#guide-d-utilisation" title="Link to this heading"></a></h3>
<ol class="arabic">
<li><p><strong>Lancement de l’application</strong></p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>streamlit<span class="w"> </span>run<span class="w"> </span>interface/app.py
</pre></div>
</div>
</li>
<li><p><strong>Navigation dans l’interface</strong></p>
<ul class="simple">
<li><p>Utilisez la barre latérale pour ajuster les paramètres</p></li>
<li><p>Explorez les différents onglets pour diverses analyses</p></li>
<li><p>Téléchargez les résultats selon vos besoins</p></li>
</ul>
</li>
<li><p><strong>Interprétation des résultats</strong></p>
<ul class="simple">
<li><p>Les zones vertes représentent la production</p></li>
<li><p>Les zones orange montrent la consommation</p></li>
<li><p>La ligne rouge indique la différence (surplus/déficit)</p></li>
</ul>
</li>
</ol>
</section>
<section id="cas-d-usage-typiques">
<h3>Cas d’usage typiques<a class="headerlink" href="#cas-d-usage-typiques" title="Link to this heading"></a></h3>
<p><strong>Analyse quotidienne</strong>
- Paramétrer 30 jours d’analyse
- Activer les tendances et statistiques
- Exporter en CSV pour archivage</p>
<p><strong>Planification énergétique</strong>
- Utiliser les prédictions IA
- Tester différents scénarios météorologiques
- Analyser les patterns saisonniers</p>
<p><strong>Reporting exécutif</strong>
- Générer des rapports mensuels
- Utiliser les métriques résumées
- Exporter en format de présentation</p>
</section>
</section>
<section id="prochaines-etapes">
<h2>Prochaines étapes<a class="headerlink" href="#prochaines-etapes" title="Link to this heading"></a></h2>
<p>Pour aller plus loin avec l’interface :</p>
<ol class="arabic simple">
<li><p>Consultez <span class="xref std std-doc">notebooks/data_preprocessing</span> pour comprendre les données</p></li>
<li><p>Explorez <a class="reference internal" href="lstm_models.html"><span class="doc">Modèles LSTM</span></a> pour comprendre les prédictions</p></li>
<li><p>Visitez <a class="reference internal" href="troubleshooting.html"><span class="doc">Dépannage et Résolution de Problèmes</span></a> pour résoudre les problèmes courants</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="model_evaluation.html" class="btn btn-neutral float-left" title="Évaluation des Modèles" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="troubleshooting.html" class="btn btn-neutral float-right" title="Dépannage et Résolution de Problèmes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, AMLLAL Amine, HAJJI Mohamed.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>